{% extends 'samples_manager/base.html' %}
{% block content %}
{% load staticfiles %}
{% load widget_tweaks %}

<!-- THE MODAL WE WILL BE USING -->
<div class="modal" data-backdrop="static" data-keyboard="false"  id="modal-sample">
    <div class="modal-dialog">
      <div class="modal-content">
      </div>
    </div>
</div>

<!-- THE MODAL WE WILL BE USING -->
<div class="modal" data-backdrop="static" data-keyboard="false"  id="modal-compound">
        <div class="modal-dialog">
                <div class="modal-content">
                </div>
        </div>
</div>

<div class='panel panel-default' id="main_panel">
        <div class="row" style="margin-bottom: 20px ">
            <div class="col-sm-12">
                <h3><span style="font-size: 150%; text-decoration: underline">{{experiment.title}} samples </span></h3>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4" style="text-align: left">
             {%if request.path|slice:":23" == '/samples_manager/search' %}
                <a  href="{%  url 'samples_manager:experiment_samples_list' experiment.id  %}" type="button" class="btn back" title='Back'>
            {%else %}
                <a  href="{% url 'samples_manager:experiments_list' %}" type="button" class="btn back" title='Back'>
            {%endif%}
                <span class="glyphicon glyphicon-chevron-left"></span>Back
            </a>
            </div>
            <form style="text-align: center" id="search_samples" class="col-sm-4" name="search_form" method="GET" action="{% url 'samples_manager:search_samples' experiment.id %}"> 
                <input title="Search by sample ID, name or category" id="search_box" type="text" name="search_box"  placeholder="Search..." >
                <button title="Search by sample ID, name or category" class="btn-sm btn-warning" id="search_submit" type="submit"><span class="glyphicon glyphicon-search line_height"></span></button>
            </form>
            
            <div class="col-sm-4" style="text-align: right">
                <button type="button"
                        id = "new_sample"
                        class="btn btn-primary js-create-sample"
                        data-url="{% url 'samples_manager:sample_new' experiment.id %}">
                        <span class="glyphicon glyphicon-plus"></span>New Sample
                </button> 
                <button  type="submit"
                        id = "assign_ids"
                        class="btn btn-warning"
                        data-url="{% url 'samples_manager:assign_set_ids' experiment.id %}"
                        style="color:white;display:none">
                        <span class="glyphicon glyphicon-barcode"></span> Assign SET ID
                </button> 
                <button  type="submit"
                        id = "print_samples"
                        class="btn"
                        style="color:white;display:none">
                        <span class="glyphicon glyphicon-barcode"></span> Print labels
                </button>    
            </div>
        </div>
        <div class="panel-body">
                <div class="row">
                    <form method="post" id='assign_samples_dosimeter' class="col-sm-12"  action="{% url 'samples_manager:experiment_samples_list' experiment.id%}">
                    {% csrf_token %}
                      <div class = "row">
                          <div  class="col-sm-2"></div>
                            {% for field in form %}
                                <div style="text-align: right" class="col-sm-2 form-group{% if field.errors %} has-error{% endif %}">
                                {% render_field field class="form-control" %}
                            {% for error in field.errors %}
                                <p class="help-block">{{ error }}</p>
                            {% endfor %}
                                </div>
                            {% endfor %}
                            <button type="submit"
                                        id = "assign_dosimeters"
                                        class="col-sm-1 btn btn-success"
                                        style="color:white;display:none">
                                        <span class="glyphicon glyphicon-ok"></span>
                            </button>
                      </div>
                      <table class="col-sm-12 table-responsive sortable" id="sample-table">
                            <thead>
                                <tr>
                                <th class="sorttable_nosort"><input name="select_all" value="1" id="samples-select-all" type="checkbox"/></th>
                                <th>Last<br>update</th>
                                <th>ID</th>    
                                <th>Name</th>
                                <th>Category</th>
                                <th>Requested<br>fluence</th>
                                <th>Radiation Length<br>Occupancy<br>(%)</th>
                                <th>Nu. Coll. Length<br>Occupancy<br>(%)</th>
                                <th>Nu. Int. Length<br>Occupancy<br>(%)</th>
                                <th>Last<br>updated by</th>
                                <th class="sorttable_nosort">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% include 'samples_manager/partial_samples_list.html' %}
                            </tbody>
                        </table>
                    </form>
                </div>
        </div>   
</div>
{% endblock %}


